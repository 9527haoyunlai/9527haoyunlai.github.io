<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>字符流，IO流01 | 9527好运来的博客</title><meta name="author" content="好运来"><meta name="copyright" content="好运来"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="day09-字符集、IO流（一）通过File类的对象可以对文件进行操作，但是不能操作文件中的内容。要想操作文件中的内容，我们还得学习IO流。但是在正式学习IO流之前，还需要学习一个前置知识叫做字符集，只有我们把字符集搞明白了，才知道数据在底层究竟怎样存储的，再学习IO流才会更加丝滑。 一、字符集1.1 字符集的来历我们知道计算机是美国人发明的，目的是用来处理数据。由于计算机能够处理的数据只能是0和">
<meta property="og:type" content="article">
<meta property="og:title" content="字符流，IO流01">
<meta property="og:url" content="https://9527haoyunlai.github.io/2024/07/09/JavaSE/day09-%E5%AD%97%E7%AC%A6%E9%9B%86%E3%80%81IO%E6%B5%81/index.html">
<meta property="og:site_name" content="9527好运来的博客">
<meta property="og:description" content="day09-字符集、IO流（一）通过File类的对象可以对文件进行操作，但是不能操作文件中的内容。要想操作文件中的内容，我们还得学习IO流。但是在正式学习IO流之前，还需要学习一个前置知识叫做字符集，只有我们把字符集搞明白了，才知道数据在底层究竟怎样存储的，再学习IO流才会更加丝滑。 一、字符集1.1 字符集的来历我们知道计算机是美国人发明的，目的是用来处理数据。由于计算机能够处理的数据只能是0和">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://9527haoyunlai.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2024-07-09T06:07:24.000Z">
<meta property="article:modified_time" content="2024-07-09T09:51:18.491Z">
<meta property="article:author" content="好运来">
<meta property="article:tag" content="JavaSE">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://9527haoyunlai.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://9527haoyunlai.github.io/2024/07/09/JavaSE/day09-%E5%AD%97%E7%AC%A6%E9%9B%86%E3%80%81IO%E6%B5%81/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.14.0-b3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>(()=>{
      const saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      
      window.btf = {
        saveToLocal: saveToLocal,
        getScript: (url, attr = {}) => new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = url
          script.async = true
          script.onerror = reject
          script.onload = script.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            script.onload = script.onreadystatechange = null
            resolve()
          }

          Object.keys(attr).forEach(key => {
            script.setAttribute(key, attr[key])
          })

          document.head.appendChild(script)
        }),

        getCSS: (url, id = false) => new Promise((resolve, reject) => {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = url
          if (id) link.id = id
          link.onerror = reject
          link.onload = link.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            link.onload = link.onreadystatechange = null
            resolve()
          }
          document.head.appendChild(link)
        }),

        addGlobalFn: (key, fn, name = false, parent = window) => {
          const pjaxEnable = false
          if (!pjaxEnable && key.startsWith('pjax')) return

          const globalFn = parent.globalFn || {}
          const keyObj = globalFn[key] || {}
    
          if (name && keyObj[name]) return
    
          name = name || Object.keys(keyObj).length
          keyObj[name] = fn
          globalFn[key] = keyObj
          parent.globalFn = globalFn
        }
      }
    
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode
      
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '字符流，IO流01',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-09 17:51:18'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">67</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="9527好运来的博客"><span class="site-name">9527好运来的博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">字符流，IO流01</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-07-09T06:07:24.000Z" title="Created 2024-07-09 14:07:24">2024-07-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-07-09T09:51:18.491Z" title="Updated 2024-07-09 17:51:18">2024-07-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="字符流，IO流01"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="day09-字符集、IO流（一）"><a href="#day09-字符集、IO流（一）" class="headerlink" title="day09-字符集、IO流（一）"></a>day09-字符集、IO流（一）</h1><p>通过File类的对象可以对文件进行操作，但是不能操作文件中的内容。要想操作文件中的内容，我们还得学习IO流。但是在正式学习IO流之前，还需要学习一个前置知识叫做字符集，只有我们把字符集搞明白了，才知道数据在底层究竟怎样存储的，再学习IO流才会更加丝滑。</p>
<h2 id="一、字符集"><a href="#一、字符集" class="headerlink" title="一、字符集"></a>一、字符集</h2><h3 id="1-1-字符集的来历"><a href="#1-1-字符集的来历" class="headerlink" title="1.1 字符集的来历"></a>1.1 字符集的来历</h3><p>我们知道计算机是美国人发明的，目的是用来处理数据。由于计算机能够处理的数据只能是0和1组成的二进制数据，为了让计算机能够处理字符，于是美国人就把他们会用到的每一个字符进行了编码（<strong>所谓编码，就是为一个字符编一个二进制数据</strong>），如下图所示：</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/1667738471094.png" alt="1667738471094"></p>
<p>ASCII(American Standard Code for Information Interchange):美国信息交换标准代码，包括英文、符号等。</p>
<p>标准的ASCII使用一个字节存储一个字符，首位是0，总共可以存储128个字符，对美国人来说完全够用。</p>
<p>于是中国人为了在计算机中存储中文，也编了一个中国人用的字符集叫做GBK字符集，这里面包含2万多个汉字字符，<strong>GBK中一个汉字采用两个字节来存储</strong>，为了能够显示英文字母，GBK字符集也兼容了ASCII字符集，<strong>在GBK字符集中一个字母还是采用一个字节来存储</strong>。</p>
<h3 id="1-2-汉字和字母的编码特点"><a href="#1-2-汉字和字母的编码特点" class="headerlink" title="1.2 汉字和字母的编码特点"></a>1.2 汉字和字母的编码特点</h3><p>讲到这里，可能有同学有这么一个疑问： 如果一个文件中既有中文，也有英文，那计算机怎么知道哪几个字节表示一个汉字，哪几个字节表示一个字母呢？</p>
<p>其实这个问题问当想当有水平，接下来，就带着同学们了解一下，计算机是怎么识别中文和英文的。</p>
<p>比如：在文件中存储一个<code>我a你</code>，底层其实存储的是这样的二进制数据。</p>
<p><strong>需要我们注意汉字和字母的编码特点：</strong></p>
<ul>
<li><ol>
<li>如果是存储字母，采用1个字节来存储，一共8位，其中第1位是0</li>
<li>如果是存储汉字，采用2个字节来存储，一共16位，其中第1位是1</li>
</ol>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/1667739473545.png" alt="1667739473545"></p>
<p><strong>当读取文件中的字符时，通过识别读取到的第1位是0还是1来判断是字母还是汉字</strong></p>
<ul>
<li>如果读取到第1位是0，就认为是一个字母，此时往后读1个字节。</li>
<li>如果读取到第1位是1，就认为是一个汉字，此时往后读2个字节。</li>
</ul>
<h3 id="1-3-Unicode字符集"><a href="#1-3-Unicode字符集" class="headerlink" title="1.3 Unicode字符集"></a>1.3 Unicode字符集</h3><p>同学们注意了，咱们国家可以用GBK字符集来表示中国人使用的文字，那世界上还有很多其他的国家，他们也有自己的文字，他们也想要自己国家的文字在计算机中处理，于是其他国家也在搞自己的字符集，就这样全世界搞了上百个字符集，而且各个国家的字符集互不兼容。 这样其实很不利于国际化的交流，可能一个文件在我们国家的电脑上打开好好的，但是在其他国家打开就是乱码了。</p>
<p>为了解决各个国家字符集互不兼容的问题，由国际化标准组织牵头，设计了一套全世界通用的字符集，叫做Unicode字符集，也叫万国码。在Unicode字符集中包含了世界上所有国家的文字，最早提供的编码方案交UTF-32，用4个字节表示一个字符，这种方案比较奢侈，因为4个字节表示一个字符占存储空间，通讯效率变低。</p>
<p>在Unicode字符集中，采用一个字符4个字节的编码方案，又造成另一个问题：如果是说英语的国家，他们只需要用到26大小写字母，加上一些标点符号就够了，本身一个字节就可以表示完，用4个字节就有点浪费。</p>
<p>于是又对Unicode字符集中的字符进行了重新编码，一共设计了三种编码方案。分别是UTF-32、UTF-16、UTF-8;  <strong>其中比较常用的编码方案是UTF-8</strong></p>
<p>下面我们详细介绍一下UTF-8这种编码方案的特点。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>UTF-<span class="number">8</span>是一种可变长的编码方案，工分为<span class="number">4</span>个长度区:<span class="number">1</span>字节、<span class="number">2</span>字节、<span class="number">3</span>字节、<span class="number">4</span>字节</span><br><span class="line"><span class="number">2.</span>英文字母、数字占<span class="number">1</span>个字节兼容(ASCII编码)</span><br><span class="line"><span class="number">3.</span>汉字字符占<span class="number">3</span>个字节</span><br><span class="line"><span class="number">4.</span>极少数字符占<span class="number">4</span>个字节</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303142629058.png" alt="image-20240303142629058"></p>
<p>技术人员开发的时候，都应该使用UTF-8编码！</p>
<p>总结：</p>
<p>ASCII字符集：只有英文、数字、符号等，占1个字节。</p>
<p>GBK字符集：汉字占2个字节，英文、数字占1个字节。</p>
<p>UTF-8字符集：汉字占3个字节，英文、数字占1个字节。</p>
<p>注意：</p>
<p>字符编码时使用的字符集和解码时使用的字符集必须一致，否则会出现乱码。</p>
<p>英文和数字一般不会出现乱码，因为很多字符集都兼容ASCII编码。</p>
<h3 id="1-4-字符集小结"><a href="#1-4-字符集小结" class="headerlink" title="1.4 字符集小结"></a>1.4 字符集小结</h3><p>最后，我们将前面介绍过的字符集小结一下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ASCII字符集：《美国信息交换标准代码》，包含英文字母、数字、标点符号、控制字符</span><br><span class="line">	特点：<span class="number">1</span>个字符占<span class="number">1</span>个字节</span><br><span class="line"></span><br><span class="line">GBK字符集：中国人自己的字符集，兼容ASCII字符集，还包含<span class="number">2</span>万多个汉字</span><br><span class="line">	特点：<span class="number">1</span>个字母占用<span class="number">1</span>个字节；<span class="number">1</span>个汉字占用<span class="number">2</span>个字节</span><br><span class="line"></span><br><span class="line">Unicode字符集：包含世界上所有国家的文字，有三种编码方案，最常用的是UTF-<span class="number">8</span></span><br><span class="line">    UTF-<span class="number">8</span>编码方案：英文字母、数字占<span class="number">1</span>个字节兼容(ASCII编码)、汉字字符占<span class="number">3</span>个字节</span><br></pre></td></tr></table></figure>



<h3 id="1-5-编码和解码"><a href="#1-5-编码和解码" class="headerlink" title="1.5 编码和解码"></a>1.5 编码和解码</h3><p>搞清楚字符集的知识之后，我们接下来再带着同学们使用Java代码完成编码和解码的操作。</p>
<p>其实String类类中就提供了相应的方法，可以完成编码和解码的操作。</p>
<ul>
<li>编码：把字符串按照指定的字符集转换为字节数组</li>
<li>解码：把字节数组按照指定的字符集转换为字符串</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303144415061.png" alt="image-20240303144415061"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握如何使用Java代码完成对字符的编码和解码。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、编码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;a我b&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] bytes = data.getBytes(); <span class="comment">// 默认是按照平台字符集（UTF-8）进行编码的。</span></span><br><span class="line">        System.out.println(Arrays.toString(bytes));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 按照指定字符集进行编码。</span></span><br><span class="line">        <span class="type">byte</span>[] bytes1 = data.getBytes(<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">        System.out.println(Arrays.toString(bytes1));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、解码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes); <span class="comment">// 按照平台默认编码（UTF-8）解码</span></span><br><span class="line">        System.out.println(s1);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes1, <span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="二、IO流（字节流）"><a href="#二、IO流（字节流）" class="headerlink" title="二、IO流（字节流）"></a>二、IO流（字节流）</h2><h3 id="2-1-IO流概述"><a href="#2-1-IO流概述" class="headerlink" title="2.1 IO流概述"></a>2.1 IO流概述</h3><p>我们知道File只能操作文件，但是不能操作文件中的内容。我们也学习了字符集，不同的字符集存字符数据的原理是不一样的。有了前面两个知识的基础，接下来我们再学习IO流，就可以对文件中的数据进行操作了。</p>
<p>IO流的作用：就是可以对文件或者网络中的数据进行读、写的操作。如下图所示</p>
<ul>
<li>把数据从磁盘、网络中读取到程序中来，用到的是输入流。</li>
<li>把程序中的数据写入磁盘、网络中，用到的是输出流。</li>
<li><strong>简单记：输入流（读数据）、输出流（写数据）</strong></li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303150345567.png" alt="image-20240303150345567"></p>
<p>IO流在Java中有很多种，不同的流来干不同的事情。Java把各种流用不同的类来表示，这些流的继承体系如下图所示：</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303152148466.png" alt="image-20240303152148466"></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303152259401.png" alt="image-20240303152259401"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">IO流分为两大派系：</span><br><span class="line">	<span class="number">1.</span>字节流：字节流又分为字节输入流、字节输出流</span><br><span class="line">	<span class="number">2.</span>字符流：字符流由分为字符输入流、字符输出流</span><br><span class="line">IO流的四大流派：</span><br><span class="line">    <span class="number">1.</span>字节输入流：以内存为基准，来自磁盘文件/网络中的数据以字节的形式读入到内存中去的流。</span><br><span class="line">    <span class="number">2.</span>字节输出流：以内存为基准，把内存中的数据以字节的形式写到磁盘文件或者网络中去的流。</span><br><span class="line">    <span class="number">3.</span>字符输入流：以内存为基准，来自磁盘文件/网络中的数据以字符的形式读入到内存中去的流。</span><br><span class="line">    <span class="number">4.</span>字符输出流：以内存为基准，把内存中的数据以字符的形式写到磁盘文件或者网络中去的流。</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/1667823186345.png" alt="1667823186345"></p>
<p>抽象类一般不能直接创建对象去解决问题的，遇到抽象类一般要去找它的实现类去创建对象。</p>
<p>小结：</p>
<p>IO流的作用：对文件或者网络中的数据进行读写操作</p>
<p>IO流怎么划分？大体划分为哪几类？</p>
<p>按方向划分为：输入流和输出流</p>
<p>按流中的数据的最小单位：字节流(可以操作音频、图片、文本)、字符流(读写txt、java文件)</p>
<p>总体分为四大类：字节输入流(InputStream)、字节输出流(OutputStream)、字符输入流(Reader)、字符输出流(Writer)</p>
<h3 id="2-2-FileInputStream读取一个字节"><a href="#2-2-FileInputStream读取一个字节" class="headerlink" title="2.2 FileInputStream读取一个字节"></a>2.2 FileInputStream读取一个字节</h3><p>接下来学习字节流中的字节输入流，用InputStream来表示。但是InputStream是抽象类，用的是它的子类，叫FileInputStream。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/1667823371395.png" alt="1667823371395"></p>
<p>需要用到的方法如下图所示：有构造方法、成员方法</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/1667823417184.png" alt="1667823417184"></p>
<p>使用FileInputStream读取文件中的字节数据，步骤如下  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">第一步：创建FileInputStream文件字节输入流管道，与源文件接通。</span><br><span class="line">第二步：开始读取文件的字节数据。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputStreamTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、创建文件字节输入流管道，与源文件接通。有异常，担心文件路径写的不对，或者路径不存在。</span></span><br><span class="line">        <span class="comment">// FileInputStream is = new FileInputStream(new File(&quot;file-io-app\\src\\itheima01.txt&quot;));</span></span><br><span class="line">        <span class="comment">// InputStream is = new FileInputStream(new File(&quot;file-io-app\\src\\itheima01.txt&quot;)); // 多态写法，左边会用父类InputStream</span></span><br><span class="line">        <span class="comment">// 多态是Java的特征之一，用多态写代码就知道右边是实现类，左边是父类。以后这两个类的关系就很清晰。</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 简化写法：推荐使用。</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>((<span class="string">&quot;file-io-app\\src\\itheima01.txt&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、开始读取文件的字节数据。</span></span><br><span class="line">        <span class="comment">// public int read():每次读取一个字节返回，如果没有数据了，返回-1.</span></span><br><span class="line"><span class="comment">//        int b1 = is.read();</span></span><br><span class="line"><span class="comment">//        System.out.println((char)b1);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        int b2 = is.read();</span></span><br><span class="line"><span class="comment">//        System.out.println((char) b2);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        int b3 = is.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(b3);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、使用循环改造上述代码</span></span><br><span class="line">        <span class="type">int</span> b; <span class="comment">// 用于记住读取的字节。</span></span><br><span class="line">        <span class="keyword">while</span> ((b = is.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.print((<span class="type">char</span>) b);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取数据的性能很差！</span></span><br><span class="line">        <span class="comment">// 读取汉字输出会乱码！！无法避免的！！</span></span><br><span class="line">        <span class="comment">// 流使用完毕之后，必须关闭！释放系统资源！</span></span><br><span class="line">        is.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<p>1、文件字节输入流的作用：将磁盘或网络中的数据以字节的形式读入到程序中</p>
<p>2、每次读取一个字节的方法：read()方法</p>
<p>3、每次读取一个字节存在的问题：</p>
<p>(1) 读取文件的性能很差，由于文件是在硬盘里的，所以需要在硬盘中去找文件。但是程序是在内存中执行的，不能直接去硬盘中找文件的。每次读取数据时，系统需要调用相关的硬件资源去读取文件中的数据。而程序调用硬件资源的开销，以及去硬盘中找数据的性能相对内存来说是很慢的。</p>
<p>(2) 读取汉字会出现乱码。因为在UTF-8的格式下，汉字是3个字节存放的，而每次只读取一个字节会出现乱码。</p>
<h3 id="2-3-FileInputStream-每次读取多个字节"><a href="#2-3-FileInputStream-每次读取多个字节" class="headerlink" title="2.3 FileInputStream 每次读取多个字节"></a>2.3 FileInputStream 每次读取多个字节</h3><p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303163646776.png" alt="image-20240303163646776"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握使用FileInputStream每次读取多个字节。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputStreamTest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、创建一个字节输入流对象代表字节输入流管道与源文件接通。</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;file-io-app\\src\\itheima02.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、开始读取文件中的字节数据：每次读取多个字节。</span></span><br><span class="line">        <span class="comment">//  public int read(byte b[]) throws IOException</span></span><br><span class="line">        <span class="comment">//  每次读取多个字节到字节数组中去，返回读取的字节数量，读取完毕会返回-1.</span></span><br><span class="line"><span class="comment">//        byte[] buffer = new byte[3];</span></span><br><span class="line"><span class="comment">//        int len = is.read(buffer);</span></span><br><span class="line"><span class="comment">//        String rs = new String(buffer); // 用new String把字节数组往里一扔，相当于做解码，把字节数转成对应的字符串形式</span></span><br><span class="line"><span class="comment">//        System.out.println(rs);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;当次读取的字节数量：&quot; + len);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        // buffer = [abc]</span></span><br><span class="line"><span class="comment">//        // buffer = [66c] 原数据[abc66]，由于第一次读的时候最后一个位置放的是c，所以c这个字节还是在里面的</span></span><br><span class="line"><span class="comment">//        int len2 = is.read(buffer);</span></span><br><span class="line"><span class="comment">//        // 注意：读取多少，倒出多少。</span></span><br><span class="line"><span class="comment">//        String rs2 = new String(buffer, 0, len2);</span></span><br><span class="line"><span class="comment">//        System.out.println(rs2);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;当次读取的字节数量：&quot; + len2);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        int len3 = is.read(buffer);</span></span><br><span class="line"><span class="comment">//        System.out.println(len3); // -1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、使用循环改造。</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">3</span>];</span><br><span class="line">        <span class="type">int</span> len; <span class="comment">// 记住每次读取了多少个字节。  abc 66</span></span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// 注意：读取多少，倒出多少。否则会导致最后一次读没有装满，全部倒出来会出现问题。</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buffer, <span class="number">0</span> , len);</span><br><span class="line">            System.out.print(rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 性能得到了明显的提升！！</span></span><br><span class="line">        <span class="comment">// 这种方案也不能避免读取汉字输出乱码的问题！！因为读的时候会把汉字截断的</span></span><br><span class="line"></span><br><span class="line">        is.close(); <span class="comment">// 关闭流</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ol>
<li><p>每次读取多个字节，调用read(buffer)方法，需要提前定义一个buffer的字节数组，每次读取buffer字节数组容量的字节，返回读取的字节数。</p>
</li>
<li><p>最后一次读取的时候容易读不满，此时就会还保留上次读取的数据，我们不能直接用String(buffer)，可以用String(buffer, 0, len)来解决该问题。</p>
</li>
<li><p>这种方案也会出现读取汉字乱码的情况，每次读取三个字节，如果汉字前面有不是3的倍数的英文字母，则会出现把汉字截断的情况。</p>
</li>
</ol>
<h3 id="2-4-FileInputStream一次性读取全部的字节"><a href="#2-4-FileInputStream一次性读取全部的字节" class="headerlink" title="2.4 FileInputStream一次性读取全部的字节"></a>2.4 FileInputStream一次性读取全部的字节</h3><p>前面两种情况，一次性读取一个或多个字节都会出现读取汉字乱码的情况，而一次性读取全部字节则不会出现这样的问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：使用文件字节输入流一次读取完文件的全部字节。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputStreamTest3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、一次性读取完文件的全部字节到一个字节数组中去。</span></span><br><span class="line">        <span class="comment">// 创建一个字节输入流管道与源文件接通</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;file-io-app\\src\\itheima03.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、方式一: 准备一个字节数组，大小与文件的大小正好一样大。</span></span><br><span class="line">        <span class="comment">// 创建一个文件对象，指向要读取的文件</span></span><br><span class="line"><span class="comment">//        File f = new File(&quot;file-io-app\\src\\itheima03.txt&quot;);</span></span><br><span class="line"><span class="comment">//        long size = f.length(); // 拿到文件的大小，返回的是long类型的。文件在磁盘中可以很大，内存很小</span></span><br><span class="line"><span class="comment">//        byte[] buffer = new byte[(int) size]; // 只能读取相对小一点的文件</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        int len = is.read(buffer);</span></span><br><span class="line"><span class="comment">//        System.out.println(new String(buffer));</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        System.out.println(size);</span></span><br><span class="line"><span class="comment">//        System.out.println(len);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 方式二:Java官方为InputStream提供的readAllBytes()方法</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = is.readAllBytes();</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buffer));</span><br><span class="line"></span><br><span class="line">        is.close(); <span class="comment">// 关闭流</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>总结：</p>
<ol>
<li>方式一：自己定义一个字节数组与被读取的文件大小一样，然后使用该字节数组，调用read(buffer)一次读完文件的全部字节。</li>
<li>方式二：Java官方为InputStream提供了readAllBytes()这个方法，可以把文件的全部字节读取到一个字节数组中返回。一旦发现这个文件超过内存大小，会抛出内存溢出异常。</li>
<li>一次性读取全部字节会出现内存不够溢出的情况，所以读写文本内容更适合用字符流。字节流适合做数据的转移，如文件复制等。</li>
</ol>
<h3 id="2-5-FileOutputStream文件字节输出流"><a href="#2-5-FileOutputStream文件字节输出流" class="headerlink" title="2.5 FileOutputStream文件字节输出流"></a>2.5 FileOutputStream文件字节输出流</h3><p>作用：把内存中的数据以字节的形式写到文件中去。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303173341441.png" alt="image-20240303173341441"></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303173405096.png" alt="image-20240303173405096"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握文件字节输出流FileOutputStream的使用。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileOutputStreamTest4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、创建一个字节输出流管道与目标文件接通。</span></span><br><span class="line">        <span class="comment">// 覆盖管道：覆盖之前的数据</span></span><br><span class="line"><span class="comment">//        OutputStream os = new FileOutputStream(&quot;file-io-app/src/itheima04out.txt&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 追加数据的管道，写数据的时候文件可以自动生成</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;file-io-app/src/itheima04out.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、开始写字节数据出去了</span></span><br><span class="line">        os.write(<span class="number">97</span>); <span class="comment">// 97就是一个字节，代表a</span></span><br><span class="line">        os.write(<span class="string">&#x27;b&#x27;</span>); <span class="comment">// &#x27;b&#x27;字符也是一个字节</span></span><br><span class="line">        <span class="comment">// os.write(&#x27;磊&#x27;); // [ooo] 默认只能写出去一个字节</span></span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="string">&quot;我爱你中国abc&quot;</span>.getBytes(); <span class="comment">// 将字符串转换成一个字节数组</span></span><br><span class="line">        os.write(bytes);</span><br><span class="line"></span><br><span class="line">        os.write(bytes, <span class="number">0</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 换行符:\r\n，需要先把换行符转换成字节数组。因为write只能写字符数组</span></span><br><span class="line">        os.write(<span class="string">&quot;\r\n&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        os.close(); <span class="comment">// 关闭流</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ol>
<li><p>如何创建字节输出管道？</p>
<p>覆盖管道：</p>
<p>OutputStream os &#x3D; new FileOutputStream(“path”);</p>
<p>追加管道：</p>
<p>OutputStream os &#x3D; new FileOutputStream(“path”, true);</p>
</li>
<li><p>字节输出流写数据的方法有哪些？</p>
<p>写一个字节：write(int a);write(char ch)</p>
<p>写一个字符数组:write(bytes)</p>
<p>写一个字符数组一部分：write(bytes, 开始位置，结束位置)；</p>
</li>
<li><p>字节输出流如何实现写出去的数据可以换行？</p>
<p>换行符为”\r\n”,因为\n一般适合Windows操作系统，”\r\n”能适合大部分的操作系统。需要先把换行符转换成字节数组。因为write只能写字符数组。</p>
</li>
</ol>
<h3 id="2-6-案例：文件复制"><a href="#2-6-案例：文件复制" class="headerlink" title="2.6 案例：文件复制"></a>2.6 案例：文件复制</h3><p>1. </p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303184808332.png" alt="image-20240303184808332"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：使用字节流完成对文件的复制操作。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CopyTest5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 需求：复制照片。</span></span><br><span class="line">        <span class="comment">// 1、创建一个字节输入流管道与源文件接通</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;file-io-app\\src\\itheima03.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2、创建一个字节输出流管道与目标文件接通。</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;file-io-app\\src\\itheima03copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="number">10</span> / <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 3、创建一个字节数组，负责转移字节数据。</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>]; <span class="comment">// 1KB.</span></span><br><span class="line">        <span class="comment">// 4、从字节输入流中读取字节数据，写出去到字节输出流中。读多少写出去多少。</span></span><br><span class="line">        <span class="type">int</span> len; <span class="comment">// 记住每次读取了多少个字节。</span></span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            os.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 先创建的流后关掉，后创建的流先关掉。</span></span><br><span class="line">        os.close();</span><br><span class="line">        is.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;复制完成！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>文件复试是可以复制一切东西的，在计算机里所有的文件本质都是由字节组成的。文件复制的程序就是把源文件的全部字节，一字不漏的转移给目标字节。只要我们源文件与目标文件的格式是一模一样的就没有问题。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240303223054885.png" alt="image-20240303223054885"></p>
<h3 id="2-7-IO流释放资源的方式"><a href="#2-7-IO流释放资源的方式" class="headerlink" title="2.7 IO流释放资源的方式"></a>2.7 IO流释放资源的方式</h3><p>我们之前用完IO流之后直接用close方法关闭是十分不专业的，在将来的开发中我们中间的代码可能有很多，难免会在中间的某行代码那出现异常，一旦中间代码出现异常，下面释放资源的代码是没机会执行的。这样会导致这两个流占用的系统资源得不到释放。</p>
<p>接下来学习释放流的两种方式：</p>
<p>try-catch-finally</p>
<p>try-with-resource</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304010349466.png" alt="image-20240304010349466"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：认识try-catch-finally。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="number">10</span> / <span class="number">2</span>);</span><br><span class="line">            <span class="comment">// return; // 跳出方法的执行</span></span><br><span class="line">            <span class="comment">// System.exit(0); // 虚拟机</span></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;===finally执行了一次===&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(chu(<span class="number">10</span>, <span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">chu</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> a / b;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// 代表的是出现异常</span></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 千万不要在finally中返回数据！不然调用方法的时候finally始终返回数据，导致方法返回结果不准确。</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">111</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>try-catch-finally:不管try里面是否发生异常都会执行finally里面的内容，如果不加finally虽然一般情况下会执行，但是当try中有return时会跳出方法，下面的就执行不了。但是不管有没有return finally中的内容都会执行的，finally会在return之前执行的。只有一种情况下finally是执行不了的，当System.exit(0)终止虚拟机的时候。</p>
<p>finally的作用：一般用于在程序执行完成之后进行资源的释放操作(专业级做法)</p>
<p>使用try-catch-finally:全部选中，按ctrl+alt+T键选择try-catch-finally </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握释放资源的方式。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>  &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="number">10</span> / <span class="number">0</span>);</span><br><span class="line">            <span class="comment">// 1、创建一个字节输入流管道与源文件接通</span></span><br><span class="line">            is = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;file-io-app\\src\\itheima03.txt&quot;</span>);</span><br><span class="line">            <span class="comment">// 2、创建一个字节输出流管道与目标文件接通。</span></span><br><span class="line">            os = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;file-io-app\\src\\itheima03copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="number">10</span> / <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、创建一个字节数组，负责转移字节数据。</span></span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>]; <span class="comment">// 1KB.</span></span><br><span class="line">            <span class="comment">// 4、从字节输入流中读取字节数据，写出去到字节输出流中。读多少写出去多少。</span></span><br><span class="line">            <span class="type">int</span> len; <span class="comment">// 记住每次读取了多少个字节。</span></span><br><span class="line">            <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                os.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;复制完成！！&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 释放资源的操作</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(os != <span class="literal">null</span>) os.close(); <span class="comment">// 加if判断语句，避免创建流之前出现空指针异常。最后也需要抛异常</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(is != <span class="literal">null</span>) is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然用try-catch-finally释放资源也正确，但是会出现代码臃肿。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304012933945.png" alt="image-20240304012933945"></p>
<p>只需要将用到的流对象资源都定义到小括号里，等将这些流用完会自动调用close方法释放。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握释放资源的方式：try-with-resource</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>  &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、创建一个字节输入流管道与源文件接通</span></span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;file-io-app\\src\\itheima03.txt&quot;</span>);</span><br><span class="line">                <span class="comment">// 2、创建一个字节输出流管道与目标文件接通。</span></span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;file-io-app\\src\\itheima03copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 注意：这里只能放置资源对象。（流对象）</span></span><br><span class="line">                <span class="comment">// int age = 21; // 这个是变量，变量不是资源，不能在这里面定义。</span></span><br><span class="line">                <span class="comment">// 什么是资源呢？Java为了方便我们识别资源，资源都是会实现AutoCloseable接口。资源都会有一个close方法，并且                    资源放到这里后</span></span><br><span class="line">                <span class="comment">// 用完之后，会被自动调用其close方法完成资源的释放操作。这就是为什么我们将流对象放到这里后，它能自动帮我们关                    闭资源对象。</span></span><br><span class="line">                <span class="type">MyConnection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyConnection</span>(); <span class="comment">// 创建自己的资源</span></span><br><span class="line">                )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、创建一个字节数组，负责转移字节数据。</span></span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>]; <span class="comment">// 1KB.</span></span><br><span class="line">            <span class="comment">// 4、从字节输入流中读取字节数据，写出去到字节输出流中。读多少写出去多少。</span></span><br><span class="line">            <span class="type">int</span> len; <span class="comment">// 记住每次读取了多少个字节。</span></span><br><span class="line">            <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                os.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">             System.out.println(conn);</span><br><span class="line">            System.out.println(<span class="string">&quot;复制完成！！&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConnection</span> <span class="keyword">implements</span> <span class="title class_">AutoCloseable</span>&#123; <span class="comment">// 自己定义一个资源，需要实现Autocloseable接口，必须要重写里面的close抽象方法(alt+回车)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;释放了与某个硬件的链接资源~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="三、IO流-字符流"><a href="#三、IO流-字符流" class="headerlink" title="三、IO流 (字符流)"></a>三、IO流 (字符流)</h2><p>字节流适合复制文件，不适合读写文件。因为字节流读写文件的时候会截断，一次读完文件的全部字节虽然可以避免乱码，但是一旦你文件过大又没有足够的内存大小。</p>
<p>字符流适合读写文本文件内容。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304160348385.png" alt="image-20240304160348385"></p>
<h3 id="3-1-FileReader文件字符输入流"><a href="#3-1-FileReader文件字符输入流" class="headerlink" title="3.1 FileReader文件字符输入流"></a>3.1 FileReader文件字符输入流</h3><p>作用：把文件中的数据以字符的形式读入到内存。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304160643721.png" alt="image-20240304160643721"></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304160745970.png" alt="image-20240304160745970"></p>
<h3 id="3-2-FileReader每次读取一个字符"><a href="#3-2-FileReader每次读取一个字符" class="headerlink" title="3.2 FileReader每次读取一个字符"></a>3.2 FileReader每次读取一个字符</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileReaderTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>  &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、创建一个文件字符输入流管道与源文件接通</span></span><br><span class="line">                <span class="type">Reader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;io-app2\\src\\itheima01.txt&quot;</span>);</span><br><span class="line">                )&#123;</span><br><span class="line">            <span class="comment">// 2、读取文本文件的内容了。</span></span><br><span class="line">            <span class="type">int</span> c; <span class="comment">// 记住每次读取的字符编号。</span></span><br><span class="line">            <span class="keyword">while</span> ((c = fr.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                System.out.println(c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>每次读取一个字符的形式，性能肯定是比较差的，每次读取都需要系统调用。</p>
<h3 id="3-3FileReader每次读取多个字符"><a href="#3-3FileReader每次读取多个字符" class="headerlink" title="3.3FileReader每次读取多个字符"></a>3.3FileReader每次读取多个字符</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握文件字符输入流。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileReaderTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>  &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、创建一个文件字符输入流管道与源文件接通</span></span><br><span class="line">                <span class="type">Reader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;io-app2\\src\\itheima01.txt&quot;</span>); <span class="comment">// 多态</span></span><br><span class="line">                )&#123;</span><br><span class="line">            <span class="comment">// char类型占两个字节   在java中字符的编码是按照Unicode编码的 所有字符都占两个字节 如 &#x27;a&#x27; 和 ‘我&#x27;</span></span><br><span class="line">            <span class="comment">// 但是在编码utf-8时 &#x27;a&#x27;字符会被编码成1个字节 而汉字&#x27;我&#x27;会被编码成3个字节</span></span><br><span class="line">            <span class="comment">// https://blog.csdn.net/YX_Swag/article/details/121430559</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 2、每次读取多个字符。</span></span><br><span class="line">              <span class="type">char</span>[] buffer = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">3</span>];</span><br><span class="line">              <span class="type">int</span> len; <span class="comment">// 记住每次读取了多少个字符。</span></span><br><span class="line">              <span class="keyword">while</span> ((len = fr.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                  <span class="comment">// 读取多少倒出多少</span></span><br><span class="line">                  System.out.print(<span class="keyword">new</span> <span class="title class_">String</span>(buffer, <span class="number">0</span>, len));</span><br><span class="line">              &#125;</span><br><span class="line">            <span class="comment">// 性能是比较不错的！</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>问题：</p>
<p>使用文件字符输入流有啥好处？</p>
<p>方便文件的读取，不会出现截断字符的情况。</p>
<p>每次读取一个字符的方法是啥？每次读取多个字符的方法是啥？他们各有什么特点？</p>
<p>每次读取一个的方法是read(),每次读取多个字符的方法是read(char[] buffer)，每次读取一个字符会频繁的进行系统调用，每次读取多个字符的性能相对来说比较好。</p>
<h3 id="3-4-FileWriter文件字符输出流"><a href="#3-4-FileWriter文件字符输出流" class="headerlink" title="3.4 FileWriter文件字符输出流"></a>3.4 FileWriter文件字符输出流</h3><p>文件字符输出流作用：将内存中的数据以字符的形式写到磁盘文件中去。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304162755012.png" alt="image-20240304162755012"></p>
<p>FileWriter的构造器：</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304162943524.png" alt="image-20240304162943524"></p>
<p>FileWriter提供写字符的方法：</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304163032701.png" alt="image-20240304163032701"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握文件字符输出流：写字符数据出去</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileWriterTest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 0、创建一个文件字符输出流管道与目标文件接通。</span></span><br><span class="line">                <span class="comment">// 覆盖管道</span></span><br><span class="line">                <span class="comment">// Writer fw = new FileWriter(&quot;io-app2/src/itheima02out.txt&quot;);</span></span><br><span class="line">                <span class="comment">// 追加数据的管道</span></span><br><span class="line">                <span class="type">Writer</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;io-app2/src/itheima02out.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">                )&#123;</span><br><span class="line">            <span class="comment">// 1、public void write(int c):写一个字符出去</span></span><br><span class="line">            fw.write(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">            fw.write(<span class="number">97</span>);</span><br><span class="line">            fw.write(<span class="string">&#x27;磊&#x27;</span>); <span class="comment">// 写一个字符出去也可以</span></span><br><span class="line">            fw.write(<span class="string">&quot;\r\n&quot;</span>); <span class="comment">// 直接可以写换行符进行换行，用字节流写换行需要将字符串转调用getBytes()换成字节数组才行</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2、public void write(String c)写一个字符串出去</span></span><br><span class="line">            fw.write(<span class="string">&quot;我爱你中国abc&quot;</span>);</span><br><span class="line">            fw.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、public void write(String c ,int pos ,int len):写字符串的一部分出去</span></span><br><span class="line">            fw.write(<span class="string">&quot;我爱你中国abc&quot;</span>, <span class="number">0</span>, <span class="number">5</span>);</span><br><span class="line">            fw.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4、public void write(char[] buffer):写一个字符数组出去</span></span><br><span class="line">            <span class="type">char</span>[] buffer = &#123;<span class="string">&#x27;黑&#x27;</span>, <span class="string">&#x27;马&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line">            fw.write(buffer);</span><br><span class="line">            fw.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5、public void write(char[] buffer ,int pos ,int len):写字符数组的一部分出去</span></span><br><span class="line">            fw.write(buffer, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">            fw.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>字符输出流的一个注意事项：</p>
<p><strong>字符输出流写出数据后，必须刷新流，或者关闭流，写出去的数据才能生效。</strong></p>
<p>原因：IO流每次读写数据都需要一次系统调用才能把数据读写到文件中去，每次进行系统调用相对来说都是比较耗费系统性能的。而文件字符输出流就优化了这个问题，<strong>当创建文件字符输出流的时候，会在内存中分配一块缓冲区。</strong>以后再用文件字符输出流写数据的时候并不是直接把数据通过系统写到文件中去，而是先把数据写到缓冲区里，缓冲区在内存写的很快。最后通过调用系统全部写到文件中去。我们有两种方案来通知缓冲区进行系统调用：<strong>第一种就是刷新流，第二种是关闭流，关闭流的时候会包含刷新。</strong></p>
<p>flush()方法进行刷新，关闭后流就不能继续用了，刷新后可以继续用。</p>
<p>如果写出的数据把缓冲区挤满了还没有刷新或者关闭流怎么办？</p>
<p><strong>缓冲区如果已经装满了，再写数据的时候会把装满的数据自动同步到文件当中去。</strong></p>
<p>总结：</p>
<p>字节流适合做一切文件的拷贝(音视频、文本)；字节流不适合读取中文内容(容易截断中文的字节导致中文乱码)。</p>
<p>字符流适合做文本文件的操作(读、写)。</p>
<p>如何创建字符输出流管道？如何实现写数据的追加操作？</p>
<p>FileWriter(“path”); FileWriter(“path”, append)</p>
<p>字符输出流写数据的方法有哪些？</p>
<p>write(int c); write(char c); write(String str); write(String str, int off, int len); write(char[] cbuf); write(char[] cbuf. int off, int len);</p>
<p>字符输出流如何实现写出去的数据可以换行？</p>
<p>write(“\r\n”);</p>
<p>字符输出流写完数据后，必须注意什么？</p>
<p>要刷新或者关闭流</p>
<h2 id="四、IO-缓冲流"><a href="#四、IO-缓冲流" class="headerlink" title="四、IO-缓冲流"></a>四、IO-缓冲流</h2><p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304171133208.png" alt="image-20240304171133208"></p>
<p>缓冲流的作用：<strong>包装原始流，提高原始流的读写性能。</strong></p>
<p>之前学的文件字节&#x2F;字符流称为：原始流&#x2F;低级流。缓冲流称为：包装流&#x2F;处理流</p>
<h3 id="4-1-字节缓冲流"><a href="#4-1-字节缓冲流" class="headerlink" title="4.1 字节缓冲流"></a>4.1 字节缓冲流</h3><p>字节缓冲流的作用：对原始的字节流包装，提高字节流读写数据的性能</p>
<p>以复制文件为例：需要进行32次系统调用，性能较差。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304171409374.png" alt="image-20240304171409374"></p>
<p>字节缓冲流能提高这些原始流的性能。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304172217122.png" alt="image-20240304172217122"></p>
<p>字节缓冲输入流会把原始的字节输入流进行包装，字节缓冲输入流会开辟一个8KB的缓冲池。现在一次可以加载8KB的数据到缓冲池，只需要加载两次就能把16KB的数据都拿过来。1KB的字节数组每次都会从缓冲池里读写数据，在内存中读速度非常快。字节缓冲池每倒满8KB就会同步一次到字节输出流当中去，然后流到我们的目的地。由于字节数组在内存中操作，所以速度非常快。</p>
<p>原理：字节缓冲输入流自带了8KB缓冲池，字节缓冲输出流也自带了8KB缓冲池。</p>
<p>字节缓冲输入流和字节缓冲输出流如何包装字节输入流和字节输出流？</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304172710983.png" alt="image-20240304172710983"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握字节缓冲流的作用。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedInputStreamTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;io-app2/src/itheima01.txt&quot;</span>);</span><br><span class="line">                <span class="comment">// 1、定义一个字节缓冲输入流包装原始的字节输入流</span></span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(is);</span><br><span class="line"></span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;io-app2/src/itheima01_bak.txt&quot;</span>);</span><br><span class="line">                <span class="comment">// 2、定义一个字节缓冲输出流包装原始的字节输出流</span></span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(os);</span><br><span class="line">        )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = bis.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                bos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;复制完成！！&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以自己声明缓冲池的大小16KB：</p>
<p>BufferedInputStream(InputStream is, 8192 * 2);</p>
<p>总结：</p>
<p>缓冲流有几种？</p>
<p>缓冲流有四种，字节缓冲输入流、字节缓冲输出流、字符缓冲输入流、字符缓冲输出流。</p>
<p>字节缓冲流为什么提高了字节读写数据的性能？</p>
<p>字节缓冲流对字节流进行包装，会自动产生一个8KB的缓冲池。字节数组只需要在内存中对缓冲池进行读写，同时减少了读写数据进行系统调用的次数，提高了读写速度。</p>
<p>字节缓冲流如何使用？</p>
<p>调用BufferedInputStream(InputStream is) 和 BufferedOutputStream(OutputStream os)构造器对字节输入和输出流进行包装。用法跟字节流的用法一样。</p>
<h3 id="4-2-字符缓冲流"><a href="#4-2-字符缓冲流" class="headerlink" title="4.2 字符缓冲流"></a>4.2 字符缓冲流</h3><h4 id="4-2-1-BufferedReader字符缓冲输入流"><a href="#4-2-1-BufferedReader字符缓冲输入流" class="headerlink" title="4.2.1 BufferedReader字符缓冲输入流"></a>4.2.1 BufferedReader字符缓冲输入流</h4><p>字符缓冲流的作用：对原始的字符流包装，提高字符流读写数据的性能</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304181458099.png" alt="image-20240304181458099"></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304181530857.png" alt="image-20240304181530857"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握字符缓冲输入流的用法。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedReaderTest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>  &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">Reader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;io-app2\\src\\itheima04.txt&quot;</span>);</span><br><span class="line">                <span class="comment">// 创建一个字符缓冲输入流包装原始的字符输入流</span></span><br><span class="line">                <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(fr); <span class="comment">// 这里就可以不用多态写了，因为等会还要调用它特有的功能。</span></span><br><span class="line">        )&#123;</span><br><span class="line"><span class="comment">//            char[] buffer = new char[3];</span></span><br><span class="line"><span class="comment">//            int len;</span></span><br><span class="line"><span class="comment">//            while ((len = br.read(buffer)) != -1)&#123;</span></span><br><span class="line"><span class="comment">//                System.out.print(new String(buffer, 0, len));</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line">            <span class="comment">// 按行读取</span></span><br><span class="line"><span class="comment">//            System.out.println(br.readLine());</span></span><br><span class="line"><span class="comment">//            System.out.println(br.readLine());</span></span><br><span class="line"><span class="comment">//            System.out.println(br.readLine());</span></span><br><span class="line"><span class="comment">//            System.out.println(br.readLine());</span></span><br><span class="line"></span><br><span class="line">            String line; <span class="comment">// 记住每次读取的一行数据</span></span><br><span class="line">            <span class="keyword">while</span> ((line = br.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">                System.out.println(line);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>字符缓冲输入流：按照行读取数据的方式是常用的，因为很多情况下我们的数据都是按行存放的，比如用户名密码分为两行。</p>
<h4 id="4-2-2-BufferedWriter字符缓冲输出流"><a href="#4-2-2-BufferedWriter字符缓冲输出流" class="headerlink" title="4.2.2 BufferedWriter字符缓冲输出流:"></a>4.2.2 BufferedWriter字符缓冲输出流:</h4><p>作用：自带8KB的缓冲池提高字符输出流写数据的性能。</p>
<p>原始的字符输出流也提供了一个缓冲池，但是这个缓冲池不是特别大。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304182912838.png" alt="image-20240304182912838"></p>
<p>池子写满之后，或者做一些刷新的操作后，池子里的数据就会同步到文件里去。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304183221395.png" alt="image-20240304183221395"></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304183229032.png" alt="image-20240304183229032"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握字符缓冲输出流的用法。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedWriterTest3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">Writer</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;io-app2/src/itheima05out.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">                <span class="comment">// 创建一个字符缓冲输出流管道包装原始的字符输出流</span></span><br><span class="line">                <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(fw); <span class="comment">// 不再用多态写，等会还要调用BufferedWriter的特有功能</span></span><br><span class="line">        )&#123;</span><br><span class="line"></span><br><span class="line">            bw.write(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">            bw.write(<span class="number">97</span>);</span><br><span class="line">            bw.write(<span class="string">&#x27;磊&#x27;</span>);</span><br><span class="line">            bw.newLine();</span><br><span class="line"></span><br><span class="line">            bw.write(<span class="string">&quot;我爱你中国abc&quot;</span>);</span><br><span class="line">            bw.newLine();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-3小结"><a href="#4-2-3小结" class="headerlink" title="4.2.3小结"></a>4.2.3小结</h4><p>字符缓冲流有那几种？作用是什么？</p>
<p>字符缓冲输入流BufferedReader、字符缓冲输出流BufferedWriter。它们的作用分别是包装字符输入和输出流，自带8KB的缓冲池，提高原始字符流读写数据的性能。</p>
<p>两种字符缓冲流如何使用？各自新增了什么功能？</p>
<p>字符缓冲输入流通过BufferedReader(FileReader r)构造器来包装字符输入流，新增了readline()功能可以每次读取一行的数据。</p>
<p>字符缓冲输出流通过BufferedWriter(FileWriter w)构造器来包装字符输出流，新增了newline()功能可以实现换行。</p>
<h3 id="4-3-练习"><a href="#4-3-练习" class="headerlink" title="4.3 练习"></a>4.3 练习</h3><p>对出师表中的内容进行排序，并将排序后的结果放到一个新的文件中去</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304193635065.png" alt="image-20240304193635065"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 2、创建字符缓冲输入流与源文件接通</span></span><br><span class="line">                <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;D:\\code\\javasepromax\\file-io-app\\src\\csb.txt&quot;</span>));</span><br><span class="line">                <span class="comment">// 4、创建字符缓冲输出流与源文件接通</span></span><br><span class="line">                <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;D:\\code\\javasepromax\\file-io-app\\src\\newcsb.txt&quot;</span>));</span><br><span class="line">                )&#123;</span><br><span class="line">            <span class="comment">// 目标:恢复出师表</span></span><br><span class="line">            <span class="comment">// 1、定义一个ArrayList集合用于存储每段的内容</span></span><br><span class="line">            List&lt;String&gt; data = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、按照行读取每段，存放到集合当中去</span></span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span>((line = br.readLine())!= <span class="literal">null</span>)&#123; <span class="comment">// 如果不存在内容返回的是null</span></span><br><span class="line">                data.add(line);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 5、对List集合中的每段文字进行排序</span></span><br><span class="line">            Collections.sort(data); <span class="comment">// Collections下的sort方法默认对每个数据进行升序排序</span></span><br><span class="line">            System.out.println(data);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 6、将集合中的每行数据写新的文件中</span></span><br><span class="line">            <span class="keyword">for</span> (String ln : data) &#123;</span><br><span class="line">                bw.write(ln);</span><br><span class="line">                bw.newLine(); <span class="comment">// 每写一行就换行</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304193653917.png" alt="image-20240304193653917"></p>
<h3 id="4-4-原始流、缓冲流性能分析"><a href="#4-4-原始流、缓冲流性能分析" class="headerlink" title="4.4 原始流、缓冲流性能分析"></a>4.4 原始流、缓冲流性能分析</h3><p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304232637383.png" alt="image-20240304232637383"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    目标：观察原始流和缓冲流的性能。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeTest4</span> &#123;</span><br><span class="line">    <span class="comment">// 复制的视频路径</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SRC_FILE</span> <span class="operator">=</span> <span class="string">&quot;D:\\resource\\线程池.avi&quot;</span>;</span><br><span class="line">    <span class="comment">// 复制到哪个目的地</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEST_FILE</span> <span class="operator">=</span> <span class="string">&quot;D:\\&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// copy01(); // 低级字节流一个一个字节的赋值，慢的简直让人无法忍受，直接淘汰！</span></span><br><span class="line">        copy02();<span class="comment">// 低级的字节流流按照一个一个字节数组的形式复制，速度较慢！   低级流如果创建的缓冲字节型数组够大的话 性能也是可以的</span></span><br><span class="line">        <span class="comment">// copy03(); // 缓冲流按照一个一个字节的形式复制，速度较慢,直接淘汰！</span></span><br><span class="line">        copy04(); <span class="comment">// 缓冲流按照一个一个字节数组的形式复制，速度极快，推荐使用！</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(SRC_FILE);</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(DEST_FILE + <span class="string">&quot;1.avi&quot;</span>);</span><br><span class="line">        )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> b;</span><br><span class="line">            <span class="keyword">while</span> ((b = is.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                os.write(b);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;低级字节流一个一个字节复制耗时：&quot;</span> + (endTime - startTime) / <span class="number">1000.0</span> + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy02</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(SRC_FILE);</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(DEST_FILE + <span class="string">&quot;2.avi&quot;</span>);</span><br><span class="line">        )&#123;</span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">64</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                os.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;低级字节流使用字节数组复制耗时：&quot;</span> + (endTime - startTime) / <span class="number">1000.0</span> + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy03</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(SRC_FILE);</span><br><span class="line">                <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(is);</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(DEST_FILE + <span class="string">&quot;3.avi&quot;</span>);</span><br><span class="line">                <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(os);</span><br><span class="line">        )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> b;</span><br><span class="line">            <span class="keyword">while</span> ((b = bis.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                bos.write(b);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;缓冲流一个一个字节复制耗时：&quot;</span> + (endTime - startTime) / <span class="number">1000.0</span> + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy04</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(SRC_FILE);</span><br><span class="line">                <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(is, <span class="number">64</span> * <span class="number">1024</span>);</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(DEST_FILE + <span class="string">&quot;4.avi&quot;</span>);</span><br><span class="line">                <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(os, <span class="number">64</span> * <span class="number">1024</span>);</span><br><span class="line">        )&#123;</span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">64</span>]; <span class="comment">// 32KB</span></span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = bis.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                bos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;缓冲流使用字节数组复制耗时：&quot;</span> + (endTime - startTime) / <span class="number">1000.0</span> + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>即便是低级的字节流，我们定义的字节数组比较大的时候性能也是很好的。</p>
<p>一般情况下，字节数组或者缓冲池的大小越大，文件读取的速度越快。</p>
<p>总结：</p>
<p>推荐使用哪种方式提高字节流读取数据的性能？</p>
<p>推荐使用<strong>字节缓冲流结合字节数组</strong>的形式来读取数据或者使用<strong>较大字节数组的字节流</strong></p>
<h2 id="五、IO-转换流"><a href="#五、IO-转换流" class="headerlink" title="五、IO-转换流"></a>五、IO-转换流</h2><h3 id="5-1引出问题"><a href="#5-1引出问题" class="headerlink" title="5.1引出问题"></a>5.1引出问题</h3><p>不同编码读取出现乱码的问题：</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240304235518576.png" alt="image-20240304235518576"></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305000156719.png" alt="image-20240305000156719"></p>
<p>解决方案：将文件编码和代码的编码改成一致的就好</p>
<p>如果别人的文件就是GBK的，这时候我们就需要用到字符输入转换流，它可以解决不同编码读取时乱码的问题。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305002928272.png" alt="image-20240305002928272"></p>
<h3 id="5-2InputStreamReader字符输入转换流"><a href="#5-2InputStreamReader字符输入转换流" class="headerlink" title="5.2InputStreamReader字符输入转换流"></a>5.2InputStreamReader字符输入转换流</h3><p>字符输入流的作用是:解决不同编码时，字符流读取文本内容乱码的问题。</p>
<p>解决思路：<strong>先获取文件的原始字节流，再将其按真实的字符集编码转成字符输入流，这样字符输入流中的字符就不会乱码了。</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305005320245.png" alt="image-20240305005320245"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握字符输入转换流的作用。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InputStreamReaderTest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、得到文件的原始字节流（GBK的字节流形式）</span></span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;io-app2/src/itheima06.txt&quot;</span>);</span><br><span class="line">                <span class="comment">// 2、把原始的字节输入流按照指定的字符集编码转换成字符输入流</span></span><br><span class="line">                <span class="comment">// 这里的GBK是已知文件的编码格式就是GBK 所以才之指定 用GBK将字符编码成GBK格式的字节数据(0/1串)  编码到内存中 而不是某一个文件</span></span><br><span class="line">                <span class="comment">// 如果用指定其他编码的必定会乱码</span></span><br><span class="line">                <span class="comment">// 对于一个未知编码格式的文件 其实很难知道它所使用的编码</span></span><br><span class="line">                <span class="comment">// https://blog.csdn.net/jsbylibo/article/details/132501596</span></span><br><span class="line">                <span class="type">Reader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">                <span class="comment">// 3、把字符输入流包装成缓冲字符输入流</span></span><br><span class="line">                <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line">                )&#123;</span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span> ((line = br.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">                System.out.println(line);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<p>字符输入转换流 InputStreamReader 的作用是什么？以及怎么解决的？</p>
<p>作用是解决不同编码字符流读取文本乱码的问题，先将字节流通过字符转换流转换成指定编码的字符流，然后再使用转换后的字符流(可以封装成字符缓冲输入流)读取文件。</p>
<h3 id="5-3OutputStreamWriter字符输出转换流"><a href="#5-3OutputStreamWriter字符输出转换流" class="headerlink" title="5.3OutputStreamWriter字符输出转换流"></a>5.3OutputStreamWriter字符输出转换流</h3><p>作用：控制写出去的字符使用什么字符集编码</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305011521400.png" alt="image-20240305011521400">	解决思路：获取字节输出流，再按照指定的字符集编码将其转换成字符输出流，以后写出去的字符就会用该字符集编码了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305012033246.png" alt="image-20240305012033246"></p>
<p>第一种构造器是使用默认的编码还不如使用FileWriter，它也是默认使用的UTF-8</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握字符输出转换流的使用。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OutputStreamWriterTest3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 指定写出去的字符编码。</span></span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、创建一个文件字节输出流</span></span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;io-app2/src/itheima07out_utf-8.txt&quot;</span>);</span><br><span class="line">                <span class="comment">// 2、把原始的字节输出流，按照指定的字符集编码转换成字符输出流。</span></span><br><span class="line">                <span class="type">Writer</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(os, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">                <span class="comment">// 3、把字符输出流包装成字符缓冲输出流</span></span><br><span class="line">                <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(osw);</span><br><span class="line">                )&#123;</span><br><span class="line">            bw.write(<span class="string">&quot;我是中国人abc&quot;</span>);</span><br><span class="line">            bw.write(<span class="string">&quot;我爱你中国123&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<p>字符输出转换流OutputStreamWriter的作用？</p>
<p>控制写出去的字符使用什么样的编码，先将字节流通过字符输出转换流按照指定的编码格式转换成字符流，再将转换后的字符流(可以封装成字符缓冲输出流)写出去。</p>
<h2 id="六、IO-打印流"><a href="#六、IO-打印流" class="headerlink" title="六、IO-打印流"></a>六、IO-打印流</h2><p><strong>打印流是很好用而且容易被忽视的流。</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305124609350.png" alt="image-20240305124609350"></p>
<p>谁代表打印流？</p>
<p>PrintStream是字节输出流下面的一个打印流，PrintWriter是字符输出流下面的打印流。</p>
<p>打印流有啥用？怎么用？</p>
<p>打印流可以实现更方便、更高效的写数据出去，能实现打印啥出去就是啥出去。</p>
<p>打印流基本上可以替代之前学的输出流的。</p>
<h3 id="6-1PrintStream字节打印流"><a href="#6-1PrintStream字节打印流" class="headerlink" title="6.1PrintStream字节打印流"></a>6.1PrintStream字节打印流</h3><p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305125020426.png" alt="image-20240305125020426"></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305125118362.png" alt="image-20240305125118362"></p>
<p>打印流里面包装类一个缓冲字符输出流，自带缓冲池，性能比较好。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握打印流：PrintStream/PrintWriter的用法。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、创建一个打印流管道</span></span><br><span class="line"><span class="comment">//                PrintStream ps =</span></span><br><span class="line"><span class="comment">//                        new PrintStream(&quot;io-app2/src/itheima08.txt&quot;, Charset.forName(&quot;GBK&quot;));</span></span><br><span class="line">                  <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span></span><br><span class="line">                          <span class="keyword">new</span> <span class="title class_">PrintStream</span>(<span class="string">&quot;io-app2/src/itheima08.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">                )&#123;</span><br><span class="line">                ps.println(<span class="number">97</span>);</span><br><span class="line">                ps.println(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">                ps.println(<span class="string">&quot;我爱你中国abc&quot;</span>);</span><br><span class="line">                ps.println(<span class="literal">true</span>);</span><br><span class="line">                ps.println(<span class="number">99.5</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ps.write(97); // &#x27;a&#x27;这个时候就不会是97了，它把它当字节看的</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2PrintWrite字符打印流"><a href="#6-2PrintWrite字符打印流" class="headerlink" title="6.2PrintWrite字符打印流"></a>6.2PrintWrite字符打印流</h3><p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305125923746.png" alt="image-20240305125923746"></p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305130026277.png" alt="image-20240305130026277"></p>
<p>PrintWriter和PrintStream在打印数据上没有区别，但是在写数据上是有区别的。PrintWriter属于字符输出流可以写字符，PrintStream属于字节输出流可以写字节。</p>
<p>打印流是高级流，没有追加数据的，如果想追加数据的话需要包装低级流。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握打印流：PrintStream/PrintWriter的用法。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、创建一个打印流管道</span></span><br><span class="line"><span class="comment">//                PrintStream ps =</span></span><br><span class="line"><span class="comment">//                        new PrintStream(&quot;io-app2/src/itheima08.txt&quot;, Charset.forName(&quot;GBK&quot;));</span></span><br><span class="line"><span class="comment">//                PrintStream ps =</span></span><br><span class="line"><span class="comment">//                        new PrintStream(&quot;io-app2/src/itheima08.txt&quot;);</span></span><br><span class="line">                <span class="type">PrintWriter</span> <span class="variable">ps</span> <span class="operator">=</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;io-app2/src/itheima08.txt&quot;</span>, <span class="literal">true</span>));</span><br><span class="line">                )&#123;</span><br><span class="line">                ps.println(<span class="number">97</span>);</span><br><span class="line">                ps.println(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">                ps.println(<span class="string">&quot;我爱你中国abc&quot;</span>);</span><br><span class="line">                ps.println(<span class="literal">true</span>);</span><br><span class="line">                ps.println(<span class="number">99.5</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ps.write(97); // &#x27;a&#x27;这个时候就不会是97了，它把它当字节看的</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305130911110.png" alt="image-20240305130911110"></p>
<p>总结：</p>
<p>打印流有几种？各有什么特点？</p>
<p>打印流有两种PrintStream和PrintWriter,都属于输出流，能够高效的实现打印数据。PrintStream属于字节输出流而PrintWriter属于字符输出流，两者在打印数据上没有什么区别。唯一区别是PrintStream继承OutputStream支持写字节数据的方法，PrintWriter继承Writer支持写字符数据的方法。</p>
<p>打印流的优势是什么？</p>
<p>方便高效，内部封装了缓冲字符输出流能够方便的写数据出去。</p>
<h3 id="6-3打印流的应用"><a href="#6-3打印流的应用" class="headerlink" title="6.3打印流的应用"></a>6.3打印流的应用</h3><p>输出语句的重定向</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305143829059.png" alt="image-20240305143829059"></p>
<p>原来的打印语句输出的时候会输出到控制台展示，但是一旦项目上线了就没有控制台了。这时我们的输出语句往哪放就会出现Bug。</p>
<p>我们可以将输出语句输出到文件中去保存，打印流就可以把输出语句的打印位置改到某个文件中去。</p>
<p>out其实是一个PrintStream的打印流，默认创建的打印流对象就是通向控制台的。</p>
<p>可以调用System下的一个setOut方法，指定自己的打印流，就是把内部默认的打印流改成自己的打印流。</p>
<p>设置完打印流之后，往后再调用打印语句就会自动打印到我们默认的位置去。</p>
<p>输出语句的重定向代码：</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305144838985.png" alt="image-20240305144838985"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：了解下输出语句的重定向。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintTest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;老骥伏枥&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;志在千里&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> ( <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(<span class="string">&quot;io-app2/src/itheima09.txt&quot;</span>); )&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 把系统默认的打印流对象改成自己设置的打印流</span></span><br><span class="line">            System.setOut(ps);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;烈士暮年&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;壮心不已&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七、IO-数据流"><a href="#七、IO-数据流" class="headerlink" title="七、IO-数据流"></a>七、IO-数据流</h2><p>之前学的打印流啥的写出去的流，都会被当作字符串堆出去。在开发中有些业务场景下，我们希望能够把数据和数据的类型一并写出去，并且希望写出去以后能够把数据和数据对应的类型读取出来。这时候我们就需要用到数据流了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305145833812.png" alt="image-20240305145833812"></p>
<p>有两种数据流：DataInputStream数据输入流，它是字节输入流下面的一个实现类。DataOutputStream数据输出流，它是字节输出流下面的一个实现类。</p>
<h3 id="7-1DataOutputStream-数据输出流"><a href="#7-1DataOutputStream-数据输出流" class="headerlink" title="7.1DataOutputStream(数据输出流)"></a>7.1DataOutputStream(数据输出流)</h3><p>作用：允许把数据和数据类型一并写出去。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305150259041.png" alt="image-20240305150259041"></p>
<p>我们用数据输出流基本上就是用前面几个方法，写数据以及它的类型，最后写字节的方法基本不用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：数据输出流。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataOutputStreamTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、创建一个数据输出流包装低级的字节输出流</span></span><br><span class="line">                <span class="type">DataOutputStream</span> <span class="variable">dos</span> <span class="operator">=</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;io-app2/src/itheima10out.txt&quot;</span>));</span><br><span class="line">                )&#123;</span><br><span class="line">            dos.writeInt(<span class="number">97</span>);</span><br><span class="line">            dos.writeDouble(<span class="number">99.5</span>);</span><br><span class="line">            dos.writeBoolean(<span class="literal">true</span>);</span><br><span class="line">            dos.writeUTF(<span class="string">&quot;黑马程序员666！&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305150628094.png" alt="image-20240305150628094"></p>
<p>这些数据不是乱码，它是把数据及其类型一并存进去的。这种数据输出流把数据存到文件中去，不是为了给我们看的。存进去是为了方便下次能把它恢复出来。</p>
<h3 id="7-2DataInputStream-数据输入流"><a href="#7-2DataInputStream-数据输入流" class="headerlink" title="7.2DataInputStream(数据输入流)"></a>7.2DataInputStream(数据输入流)</h3><p>作用：用于读取数据输出流写出去的数据。</p>
<p>创建字节输入流的时候可以包装一个低级的字节输入流，通向某个要读的文件。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305151348846.png" alt="image-20240305151348846"></p>
<p>数据输入流是属于字节输入流下面的实现类，它肯定也有字节输入流下面的方法，但是不常用。</p>
<p>常用的就是数据输入流下独特的一些方法。</p>
<p>注意：这个读取一定要与写入对应起来，先写的什么就要先读什么。顺序一致</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：使用数据输入流读取特定类型的数据。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataInputStreamTest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">DataInputStream</span> <span class="variable">dis</span> <span class="operator">=</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">DataInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;io-app2/src/itheima10out.txt&quot;</span>));</span><br><span class="line">                )&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> dis.readInt();</span><br><span class="line">            System.out.println(i);</span><br><span class="line"></span><br><span class="line">            <span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> dis.readDouble();</span><br><span class="line">            System.out.println(d);</span><br><span class="line"></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> dis.readBoolean();</span><br><span class="line">            System.out.println(b);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">rs</span> <span class="operator">=</span> dis.readUTF();</span><br><span class="line">            System.out.println(rs);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<p>数据输出流和数据输入流分别是什么？各自有什么作用？</p>
<p>数据输出流DataOutputStream和数据输入流DataInputStream分别属于字节输出流和字节输入流下面的实现类。</p>
<p>数据输出流：能够把数据和数据的类型一并写出去</p>
<p>数据输入流：能够读取数据和数据的类型，但是一定要与写入的顺序一致</p>
<p>在做通讯的时候，用这样的流发送消息很灵活。</p>
<h2 id="八、IO-序列化流"><a href="#八、IO-序列化流" class="headerlink" title="八、IO-序列化流"></a>八、IO-序列化流</h2><p>数据流可以把特定类型数据写出去读进来</p>
<p>在将来的开发中，我们可能需要把Java对象也写出去读进来，所以Java为我们提供了序列化流。</p>
<p>对象序列化：把Java对象写入到文件中去</p>
<p>对象反序列化：把文件中的Java对象读出来</p>
<p>序列化流就是对对象进行序列化或者反序列化的</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305211414983.png" alt="image-20240305211414983"></p>
<h3 id="8-1ObjectOutputStream-对象字节输出流"><a href="#8-1ObjectOutputStream-对象字节输出流" class="headerlink" title="8.1ObjectOutputStream(对象字节输出流)"></a>8.1ObjectOutputStream(对象字节输出流)</h3><p>是字节输出流下面的实现类，是对Java对象进行序列化，把Java对象存放到文件中。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305212736866.png" alt="image-20240305212736866"></p>
<p>在开发中有些成员变量不想进行序列化，比如不想对密码进行序列化。</p>
<p>一旦成员变量添加了trainsient修饰符，那么这个成员变量将不参与序列化。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握对象字节输出流的使用：序列化对象。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1ObjectOutputStream</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 2、创建一个对象字节输出流包装原始的字节 输出流。</span></span><br><span class="line">                <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;io-app2/src/itheima11out.txt&quot;</span>));</span><br><span class="line">                )&#123;</span><br><span class="line">            <span class="comment">// 1、创建一个Java对象。</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;张三&quot;</span>, <span class="number">32</span>, <span class="string">&quot;666888xyz&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3、序列化对象到文件中去</span></span><br><span class="line">            oos.writeObject(u);</span><br><span class="line">            System.out.println(<span class="string">&quot;序列化对象成功！！&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意：对象如果需要序列化，必须实现序列化接口。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String loginName;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">// transient 这个成员变量将不参与序列化。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String passWord;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String loginName, String userName, <span class="type">int</span> age, String passWord)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.loginName = loginName;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.passWord = passWord;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLoginName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> loginName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLoginName</span><span class="params">(String loginName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.loginName = loginName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassWord</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> passWord;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassWord</span><span class="params">(String passWord)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.passWord = passWord;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;loginName=&#x27;&quot;</span> + loginName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, userName=&#x27;&quot;</span> + userName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, passWord=&#x27;&quot;</span> + passWord + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：对象如果需要实现序列化，必须实现序列化接口(Java.io.Serializable)。这个接口里面什么也没有，它就是一个标记，给JVM看的，只有这个对象那个实现类这个接口，他才允许对象按照特定的方式存入到文件中去。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305213841569.png" alt="image-20240305213841569"></p>
<p>存进去的结果不是乱码，它不是给我们看的而是方便我们下次再读出来。</p>
<h3 id="8-2ObjectInputStream-对象字节输入流"><a href="#8-2ObjectInputStream-对象字节输入流" class="headerlink" title="8.2ObjectInputStream(对象字节输入流)"></a>8.2ObjectInputStream(对象字节输入流)</h3><p>是字节输入流下面的实现类，作用是用来对Java对象进行反序列化，把Java对象从文件中读入到内存中。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305214447113.png" alt="image-20240305214447113"></p>
<p>返回一个Object对象给到我们，我们需要将它强转成我们需要的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握对象字节输入流的使用：反序列化对象。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2ObjectInputStream</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 1、创建一个对象字节输入流管道，包装 低级的字节输入流与源文件接通</span></span><br><span class="line">                <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;io-app2/src/itheima11out.txt&quot;</span>));</span><br><span class="line">                )&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> (User) ois.readObject();</span><br><span class="line">            System.out.println(u);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果想一次序列化多个对象怎么办？</p>
<p>用一个ArrayList集合存储多个对象，然后把这个集合当成一个对象，直接对集合进行序列化即可。</p>
<p>注意：ArrayList集合已经实现了序列化接口！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305220541464.png" alt="image-20240305220541464"></p>
<p>总结：</p>
<p>对象序列化的含义是什么？怎么实现对象序列化？需要注意什么？</p>
<p>对象序列化就是将对象输出到文件中。通过ObjectOutputStream对象字节输出流调用writeObject()方法进行序列化，需要对象实现Serializable(序列化)接口才行，对于不想进行序列化的成员变量可以用trainsent修饰符进行修饰。如果想对多个对象进行序列化可以将多个对象存放到ArrayList集合，直接对集合进行序列化，ArrayList底层实现了序列化接口。</p>
<p>对象反序列化的含义是什么？怎样实现对象的反序列化？</p>
<p>对象反序列化就是将Java对象从文件中读入到内存中来，通过ObjectInputStream对象字节输入流调用readObject()方法进行反序列化。</p>
<h2 id="九、IO-框架"><a href="#九、IO-框架" class="headerlink" title="九、IO-框架"></a>九、IO-框架</h2><p>什么是框架？</p>
<p>解决某类问题，编写的一套类、接口等，可以理解成一个半成品，可以拿给程序员直接使用的，大多数框架都是第三方研发的。</p>
<p>好处：在框架的基础上开发，可以得到优秀的软件架构、并提高开发效率。</p>
<p>形式：框架一般把类、接口等编译成class文件，再压缩成一个.jar结尾的文件发行出去。</p>
<p> 什么是IO框架？</p>
<p>封装了Java提供的对文件、数据进行操作的代码，对外提供了更简单的方式操作文件，读写数据等。</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305222605028.png" alt="image-20240305222605028"></p>
<p>怎么将commons-io框架与我们的项目整合起来？</p>
<p>先去官网下载框架，主要用commons-io-版本.jar这个。将这个jar拷贝到Idea新建的lib文件夹中。然后右键文件夹选择Add as Library</p>
<p><img src="https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE/image-20240305234005746.png" alt="image-20240305234005746"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：使用CommonsIO框架进行IO相关的操作。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonsIOTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="comment">//        FileUtils.copyFile(new File(&quot;io-app2\\src\\itheima01.txt&quot;), new File(&quot;io-app2/src/a.txt&quot;));</span></span><br><span class="line"><span class="comment">//        FileUtils.copyDirectory(new File(&quot;D:\\resource\\私人珍藏&quot;), new File(&quot;D:\\resource\\私人珍藏3&quot;)); //可以复制文件夹</span></span><br><span class="line"><span class="comment">//        FileUtils.deleteDirectory(new File(&quot;D:\\resource\\私人珍藏3&quot;)); // 可以删除非空文件夹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Java提供的原生的一行代码搞定很多事情</span></span><br><span class="line">        <span class="comment">// File下的copy()复制文件到指定目录下</span></span><br><span class="line">        <span class="comment">// Files.copy(Path.of(&quot;io-app2\\src\\itheima01.txt&quot;), Path.of(&quot;io-app2\\src\\b.txt&quot;));</span></span><br><span class="line">        <span class="comment">// File下的readString()把源文件读成字符串返回</span></span><br><span class="line">        System.out.println(Files.readString(Path.of(<span class="string">&quot;io-app2\\src\\itheima01.txt&quot;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="十、案例训练"><a href="#十、案例训练" class="headerlink" title="十、案例训练"></a>十、案例训练</h2><p>10.1将一个文件夹下的所有.md文件复制到指定文件夹下，要求文件夹的名字一样。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="comment">// 目标：将文件夹.md文件存放到另一个文件中去</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1、定义一个文件对象</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Users\\17991\\Desktop\\Java学习&quot;</span>);</span><br><span class="line">        <span class="comment">// 2、调用复制方法</span></span><br><span class="line">        copyFile(dir);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(File dir)</span>&#123;</span><br><span class="line">        <span class="comment">// 1、判断文件对象是否存在,</span></span><br><span class="line">        <span class="keyword">if</span>(dir == <span class="literal">null</span> || !dir.exists())&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2、判断文件对象是否为文件,如果是文件且以.md结尾则直接复制</span></span><br><span class="line">        <span class="keyword">if</span>(dir.isFile())&#123;</span><br><span class="line">            <span class="keyword">if</span>(dir.getName().substring(dir.getName().length()-<span class="number">3</span>).equals(<span class="string">&quot;.md&quot;</span>))&#123;</span><br><span class="line">                System.out.println(dir);</span><br><span class="line">                copy(dir, <span class="string">&quot;D:\\文件测试&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dir.getName().contains(<span class="string">&quot;.png&quot;</span>)||dir.getName().contains(<span class="string">&quot;.jpg&quot;</span>))&#123;</span><br><span class="line">                System.out.println(dir);</span><br><span class="line">                copy(dir, <span class="string">&quot;D:\\文件测试\\https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE&quot;</span>); <span class="comment">//复制完返回</span></span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 是文件，但不是md文件和图片,直接返回</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、此时文件对象为文件夹。拿到里面的一级文件对象</span></span><br><span class="line">        File[] files = dir.listFiles();</span><br><span class="line">        <span class="comment">// 空文件夹</span></span><br><span class="line">        <span class="keyword">if</span>(files == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4、这是一个非空文件夹</span></span><br><span class="line">        <span class="comment">// 循环执行完说明我们把当前一级文件夹下的内容全部复制完了</span></span><br><span class="line">        <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">            <span class="keyword">if</span>(file.isFile())&#123;</span><br><span class="line">                <span class="comment">// 是md文件</span></span><br><span class="line">                <span class="keyword">if</span>(file.getName().substring(file.getName().length()-<span class="number">3</span>).equals(<span class="string">&quot;.md&quot;</span>))&#123;</span><br><span class="line">                    System.out.println(file.getName());</span><br><span class="line">                    copy(file,<span class="string">&quot;D:\\文件测试&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(file.getName().substring(file.getName().length()-<span class="number">4</span>).equals(<span class="string">&quot;.png&quot;</span>) || </span><br><span class="line">                         file.getName().substring(file.getName().length()-<span class="number">4</span>).equals(<span class="string">&quot;.jpg&quot;</span>))&#123; <span class="comment">//是图片</span></span><br><span class="line">                    System.out.println(file.getName());</span><br><span class="line">                    copy(file, <span class="string">&quot;D:\\文件测试\\https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123; </span><br><span class="line">                <span class="comment">// 是文件夹，递归</span></span><br><span class="line">                copyFile(file);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用IO流进行复制文件到指定文件目录下</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(File dir, String path)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(dir);</span><br><span class="line">                <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(is);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 注意:文件路径要写对，要复制到的文件夹路径+分隔符+复制的文件名字</span></span><br><span class="line">                <span class="comment">// 方法一：手动拼接</span></span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(path+ File.separator +dir.getName());</span><br><span class="line">                <span class="comment">// 方法二：用文件对象构造器拼接 new File(String parent,String child) // 根据父路径子路径名字创建对象</span></span><br><span class="line">                <span class="comment">// 扩展：new File(File parent,String child) // 根据父路径文件对象和子路径名字创建对象</span></span><br><span class="line">                <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(os);</span><br><span class="line">        )&#123;</span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = bis.read(buffer))!= -<span class="number">1</span>)&#123;</span><br><span class="line">                bos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;复制完成!&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改进：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  将目标文件夹下的所有以.md的文件 copy到指定文件夹中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileCopy</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 源文件所在文件夹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String sourceFilePath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将目标文件所存放的文件夹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String descFilePath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 目标文件的文件名集合</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; targetFileAbsolutePath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 文件名后缀</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; suffix;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        sourceFilePath = <span class="string">&quot;E:\\javaweb_new\\微服务\\学习资料&quot;</span>;</span><br><span class="line"></span><br><span class="line">        descFilePath = <span class="string">&quot;E:\\javaweb_new\\微服务\\mdFiles\\https://cdn.jsdelivr.net/gh/9527haoyunlai/PicGo/images/JavaSE&quot;</span>;</span><br><span class="line"></span><br><span class="line">        suffix = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 将满足条件的后缀名添加到suffix集合中。</span></span><br><span class="line">        suffix.add(<span class="string">&quot;.gif&quot;</span>);</span><br><span class="line">        suffix.add(<span class="string">&quot;.png&quot;</span>);</span><br><span class="line">        suffix.add(<span class="string">&quot;.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">// suffix.add(&quot;.md&quot;);</span></span><br><span class="line"></span><br><span class="line">        targetFileAbsolutePath = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取所有目标文件的文件名</span></span><br><span class="line">        recu(<span class="keyword">new</span> <span class="title class_">File</span>(sourceFilePath)); <span class="comment">// 将目标文件地址传进去，将满足条件的目标文件的绝对地址添加到				 //                                         targetFileAbsolutePath集合里</span></span><br><span class="line">        <span class="comment">//System.out.println(targetFileAbsolutePath);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// copy文件</span></span><br><span class="line">        copyFiles(sourceFilePath, descFilePath);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * copy文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> srcPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> descPath</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFiles</span><span class="params">(String srcPath, String descPath)</span>  &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">srcFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(srcPath);</span><br><span class="line">        <span class="type">File</span> <span class="variable">descFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(descPath);</span><br><span class="line"></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bufferedInputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bufferedOutputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2kb的字节缓冲区</span></span><br><span class="line">            <span class="type">byte</span>[] fileBuffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">2</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">for</span> (String fileAbsolutePath : targetFileAbsolutePath) &#123;</span><br><span class="line">                <span class="comment">// 获取fileAbsolutePath集合对象的文件名</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> fileAbsolutePath.substring(fileAbsolutePath.lastIndexOf(<span class="string">&#x27;\\&#x27;</span>)+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//System.out.println(descPath+&#x27;\\&#x27;+fileName);</span></span><br><span class="line">                bufferedInputStream = <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(fileAbsolutePath));</span><br><span class="line">                <span class="comment">// 将目标文件路径与获取的目标文件名拼接为写入的地址</span></span><br><span class="line">                bufferedOutputStream = <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(descPath + <span class="string">&#x27;\\&#x27;</span>+ fileName));</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> ((len = bufferedInputStream.read(fileBuffer) ) != -<span class="number">1</span> )&#123;</span><br><span class="line">                    bufferedOutputStream.write(fileBuffer, <span class="number">0</span>, len);</span><br><span class="line">                &#125;</span><br><span class="line">                bufferedOutputStream.flush();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(bufferedInputStream!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    bufferedInputStream.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(bufferedOutputStream!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    bufferedOutputStream.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">recu</span><span class="params">( File file)</span>&#123;</span><br><span class="line">        <span class="comment">// 处理非文件夹的情况</span></span><br><span class="line">        <span class="keyword">if</span>(file == <span class="literal">null</span> || !file.exists())&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(file.isFile())&#123;</span><br><span class="line">            <span class="keyword">if</span>(suffix.contains(file.getName().substring(file.getName().indexOf(<span class="string">&#x27;.&#x27;</span>))))&#123;</span><br><span class="line">                <span class="comment">// copy 文件</span></span><br><span class="line">                System.out.println(file.getAbsolutePath()); <span class="comment">// 将满足条件的文件的绝对路径打印出来</span></span><br><span class="line">                <span class="comment">// 将满足条件的文件绝对路径添加到targetFileAbsolutePath集合中</span></span><br><span class="line">                targetFileAbsolutePath.add(file.getAbsolutePath());</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 拿到所有文件夹下的一级目录</span></span><br><span class="line">        File[] files = file.listFiles();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (File file1 : files) &#123;</span><br><span class="line">            <span class="keyword">if</span>(file1.isFile() )&#123;</span><br><span class="line">                <span class="keyword">if</span>(file1.getName().indexOf(<span class="string">&#x27;.&#x27;</span>) == -<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="comment">// 去除没有扩展名的文件</span></span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(suffix.contains(file1.getName().substring(file1.getName().indexOf(<span class="string">&#x27;.&#x27;</span>))))&#123;</span><br><span class="line">                    <span class="comment">// copy 文件</span></span><br><span class="line">                    System.out.println(file1.getAbsolutePath()); <span class="comment">// 将满足条件的文件的绝对路径打印出来</span></span><br><span class="line">                    <span class="comment">// 将满足条件的文件绝对路径添加到targetFileAbsolutePath集合中</span></span><br><span class="line">                    targetFileAbsolutePath.add(file1.getAbsolutePath());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                recu(file1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>10.2、删除文件夹中的所有图片</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">delete</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\文件测试&quot;</span>);</span><br><span class="line">        delete(file);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 递归删除图片文件</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(File dir)</span>&#123;</span><br><span class="line">        <span class="comment">// 1、判断文件对象是否存在</span></span><br><span class="line">        <span class="keyword">if</span>(dir ==<span class="literal">null</span> || !dir.exists())&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、判断文件对象是否为文件</span></span><br><span class="line">        <span class="keyword">if</span>(dir.isFile())&#123;</span><br><span class="line">            <span class="keyword">if</span>(dir.getName().contains(<span class="string">&quot;.png&quot;</span>))&#123;</span><br><span class="line">                dir.delete();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、文件对象为文件夹,拿到一级文件对象</span></span><br><span class="line">        File[] files = dir.listFiles();</span><br><span class="line">        <span class="keyword">if</span>(files == <span class="literal">null</span>)&#123; <span class="comment">//空文件夹</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4、此时为非空文件夹</span></span><br><span class="line">        <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">            <span class="comment">// 如果一级文件对象是文件</span></span><br><span class="line">            <span class="keyword">if</span>(file.isFile())&#123;</span><br><span class="line">                <span class="keyword">if</span>(file.getName().contains(<span class="string">&quot;.png&quot;</span>))&#123;</span><br><span class="line">                    file.delete();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                delete(file);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://9527haoyunlai.github.io">好运来</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://9527haoyunlai.github.io/2024/07/09/JavaSE/day09-%E5%AD%97%E7%AC%A6%E9%9B%86%E3%80%81IO%E6%B5%81/">https://9527haoyunlai.github.io/2024/07/09/JavaSE/day09-%E5%AD%97%E7%AC%A6%E9%9B%86%E3%80%81IO%E6%B5%81/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaSE/">JavaSE</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/09/JavaSE/day10-%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF%E3%80%81%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="特殊文件，日志技术，多线程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">特殊文件，日志技术，多线程</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/09/JavaSE/day08-Map%E9%9B%86%E5%90%88%E3%80%81Stream%E6%B5%81%E3%80%81File/" title="Map集合，Stream流，File"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">Map集合，Stream流，File</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2024/07/09/%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/" title="常用方法"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-09</div><div class="title">常用方法</div></div></a></div><div><a href="/2024/07/09/JavaSE/day01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7/" title="面向对象高级01"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-09</div><div class="title">面向对象高级01</div></div></a></div><div><a href="/2024/07/09/JavaSE/day02%E2%80%94%E2%80%94%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7/" title="面向对象高级02"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-09</div><div class="title">面向对象高级02</div></div></a></div><div><a href="/2024/07/09/JavaSE/day03%E2%80%94%E2%80%94%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7/" title="面向对象高级03"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-09</div><div class="title">面向对象高级03</div></div></a></div><div><a href="/2024/07/09/JavaSE/day04-%E5%B8%B8%E7%94%A8API/" title="常用API"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-09</div><div class="title">常用API</div></div></a></div><div><a href="/2024/07/09/JavaSE/day06-%E5%BC%82%E5%B8%B8/" title="集合进阶"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-09</div><div class="title">集合进阶</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">好运来</div><div class="author-info__description">个人博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">67</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/9527haoyunlai" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:chenqi1253@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#day09-%E5%AD%97%E7%AC%A6%E9%9B%86%E3%80%81IO%E6%B5%81%EF%BC%88%E4%B8%80%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">day09-字符集、IO流（一）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-number">1.1.</span> <span class="toc-text">一、字符集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%AD%97%E7%AC%A6%E9%9B%86%E7%9A%84%E6%9D%A5%E5%8E%86"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 字符集的来历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%B1%89%E5%AD%97%E5%92%8C%E5%AD%97%E6%AF%8D%E7%9A%84%E7%BC%96%E7%A0%81%E7%89%B9%E7%82%B9"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 汉字和字母的编码特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-Unicode%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 Unicode字符集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E5%AD%97%E7%AC%A6%E9%9B%86%E5%B0%8F%E7%BB%93"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 字符集小结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E7%BC%96%E7%A0%81%E5%92%8C%E8%A7%A3%E7%A0%81"><span class="toc-number">1.1.5.</span> <span class="toc-text">1.5 编码和解码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81IO%E6%B5%81%EF%BC%88%E5%AD%97%E8%8A%82%E6%B5%81%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">二、IO流（字节流）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-IO%E6%B5%81%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 IO流概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-FileInputStream%E8%AF%BB%E5%8F%96%E4%B8%80%E4%B8%AA%E5%AD%97%E8%8A%82"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 FileInputStream读取一个字节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-FileInputStream-%E6%AF%8F%E6%AC%A1%E8%AF%BB%E5%8F%96%E5%A4%9A%E4%B8%AA%E5%AD%97%E8%8A%82"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 FileInputStream 每次读取多个字节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-FileInputStream%E4%B8%80%E6%AC%A1%E6%80%A7%E8%AF%BB%E5%8F%96%E5%85%A8%E9%83%A8%E7%9A%84%E5%AD%97%E8%8A%82"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 FileInputStream一次性读取全部的字节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-FileOutputStream%E6%96%87%E4%BB%B6%E5%AD%97%E8%8A%82%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5 FileOutputStream文件字节输出流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.6 案例：文件复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-IO%E6%B5%81%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.7.</span> <span class="toc-text">2.7 IO流释放资源的方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81IO%E6%B5%81-%E5%AD%97%E7%AC%A6%E6%B5%81"><span class="toc-number">1.3.</span> <span class="toc-text">三、IO流 (字符流)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-FileReader%E6%96%87%E4%BB%B6%E5%AD%97%E7%AC%A6%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 FileReader文件字符输入流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-FileReader%E6%AF%8F%E6%AC%A1%E8%AF%BB%E5%8F%96%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 FileReader每次读取一个字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3FileReader%E6%AF%8F%E6%AC%A1%E8%AF%BB%E5%8F%96%E5%A4%9A%E4%B8%AA%E5%AD%97%E7%AC%A6"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3FileReader每次读取多个字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-FileWriter%E6%96%87%E4%BB%B6%E5%AD%97%E7%AC%A6%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4 FileWriter文件字符输出流</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81IO-%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-number">1.4.</span> <span class="toc-text">四、IO-缓冲流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AD%97%E8%8A%82%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 字节缓冲流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 字符缓冲流</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-BufferedReader%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">4.2.1 BufferedReader字符缓冲输入流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-BufferedWriter%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">4.2.2 BufferedWriter字符缓冲输出流:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3%E5%B0%8F%E7%BB%93"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">4.2.3小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E7%BB%83%E4%B9%A0"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 练习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%8E%9F%E5%A7%8B%E6%B5%81%E3%80%81%E7%BC%93%E5%86%B2%E6%B5%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 原始流、缓冲流性能分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81IO-%E8%BD%AC%E6%8D%A2%E6%B5%81"><span class="toc-number">1.5.</span> <span class="toc-text">五、IO-转换流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E5%BC%95%E5%87%BA%E9%97%AE%E9%A2%98"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1引出问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2InputStreamReader%E5%AD%97%E7%AC%A6%E8%BE%93%E5%85%A5%E8%BD%AC%E6%8D%A2%E6%B5%81"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2InputStreamReader字符输入转换流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3OutputStreamWriter%E5%AD%97%E7%AC%A6%E8%BE%93%E5%87%BA%E8%BD%AC%E6%8D%A2%E6%B5%81"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3OutputStreamWriter字符输出转换流</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81IO-%E6%89%93%E5%8D%B0%E6%B5%81"><span class="toc-number">1.6.</span> <span class="toc-text">六、IO-打印流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1PrintStream%E5%AD%97%E8%8A%82%E6%89%93%E5%8D%B0%E6%B5%81"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1PrintStream字节打印流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2PrintWrite%E5%AD%97%E7%AC%A6%E6%89%93%E5%8D%B0%E6%B5%81"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2PrintWrite字符打印流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3%E6%89%93%E5%8D%B0%E6%B5%81%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3打印流的应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81IO-%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-number">1.7.</span> <span class="toc-text">七、IO-数据流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1DataOutputStream-%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1DataOutputStream(数据输出流)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2DataInputStream-%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2DataInputStream(数据输入流)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81IO-%E5%BA%8F%E5%88%97%E5%8C%96%E6%B5%81"><span class="toc-number">1.8.</span> <span class="toc-text">八、IO-序列化流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1ObjectOutputStream-%E5%AF%B9%E8%B1%A1%E5%AD%97%E8%8A%82%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1ObjectOutputStream(对象字节输出流)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2ObjectInputStream-%E5%AF%B9%E8%B1%A1%E5%AD%97%E8%8A%82%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2ObjectInputStream(对象字节输入流)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81IO-%E6%A1%86%E6%9E%B6"><span class="toc-number">1.9.</span> <span class="toc-text">九、IO-框架</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E6%A1%88%E4%BE%8B%E8%AE%AD%E7%BB%83"><span class="toc-number">1.10.</span> <span class="toc-text">十、案例训练</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/09/SpringBoot+SSM/day01-HTML-CSS/" title="Untitled">Untitled</a><time datetime="2024-07-09T10:46:18.949Z" title="Created 2024-07-09 18:46:18">2024-07-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/09/SpringBoot+SSM/DataGrip%E5%AE%89%E8%A3%85%E6%89%8B%E5%86%8C/" title="Untitled">Untitled</a><time datetime="2024-07-09T10:46:18.948Z" title="Created 2024-07-09 18:46:18">2024-07-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/09/SpringBoot+SSM/api%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" title="Untitled">Untitled</a><time datetime="2024-07-09T10:46:18.947Z" title="Created 2024-07-09 18:46:18">2024-07-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/09/SpringBoot+SSM/AliOSS/" title="Untitled">Untitled</a><time datetime="2024-07-09T10:46:18.946Z" title="Created 2024-07-09 18:46:18">2024-07-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/09/SpringBoot+SSM/%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81/" title="Untitled">Untitled</a><time datetime="2024-07-09T10:46:18.944Z" title="Created 2024-07-09 18:46:18">2024-07-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 好运来</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.14.0-b3"></script><script src="/js/main.js?v=4.14.0-b3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = (ele) => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from(ele).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return
    
    codeMermaidEle.forEach(ele => {
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.innerHTML = `<pre class="mermaid-src" hidden>${ele.textContent}</pre>`
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js').then(runMermaidFn)
  }
  
  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>